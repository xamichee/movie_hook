(this.webpackJsonpmovieapp_hooks=this.webpackJsonpmovieapp_hooks||[]).push([[0],{101:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(24),i=c.n(s),o=c(59),r=c(22),u=c(114),j=c(111),l=c(110),b=(c(86),c(6));function d(e){var t=e.tabClick,c=e.active,n="Search"===c?"tabButton chosen":"tabButton",a="Rated"===c?"tabButton chosen":"tabButton";return Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:n,type:"button",onClick:t,name:"Search",children:"Search"})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:a,type:"button",onClick:t,name:"Rated",children:"Rated"})})]})}var h=c(115),O=c(112),v=(c(88),a.a.createContext([]));var f=function(e){var t,c=e.movie,a=e.rateMovie,s=e.active,i=Object(n.useState)(!0),o=Object(r.a)(i,2),u=o[0],j=o[1],d=c.id,f=c.title,m=c.release_date,g=c.poster_path,p=c.overview,x=c.rating,S=c.vote_average,y=c.genre_ids,_=g?"https://image.tmdb.org/t/p/w200".concat(g):"https://apps.alldbx.de/images/default_person.1d043.png",N=m?Object(O.a)(new Date(m),"MMMM dd, yyyy"):"NA",k=u?Object(b.jsx)(l.a,{}):null,C=Object(n.useContext)(v),w=y.map((function(e){return Object(b.jsx)("span",{className:"genre",children:C.find((function(t){return t.id===e})).name},e)})),E=(t=S)<=3?"#E90000":t<=5?"#E97E00":t<=7?"#E9D100":"#66E900",M="Rated"===s?x:S;return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsxs)("div",{className:"moviePoster",children:[k,Object(b.jsx)("img",{src:_,alt:"poster",onLoad:function(){return j(!1)}})]}),Object(b.jsxs)("div",{className:"movieInfo",children:[Object(b.jsxs)("div",{className:"movieTitle",children:[Object(b.jsx)("span",{children:f}),Object(b.jsx)("div",{className:"movieRating",style:{backgroundColor:"".concat(E)},children:Object(b.jsx)("p",{children:M})})]}),Object(b.jsx)("div",{className:"date",children:Object(b.jsx)("span",{children:N})}),Object(b.jsx)("div",{className:"movieGenres",children:w}),Object(b.jsx)("div",{className:"movieSinops",children:Object(b.jsx)("span",{children:p})}),Object(b.jsx)("div",{className:"stars",children:Object(b.jsx)(h.a,{count:10,allowHalf:!0,defaultValue:M,onChange:function(e){return a(e,d)}})})]})]})};c(101);var m=function(e){var t=e.movieList,c=e.rateMovie,n=e.active;return Object(b.jsx)("div",{className:"movieslist",children:t.map((function(e){return Object(b.jsx)(f,{movie:e,rateMovie:c,active:n},e.id)}))})},g=c(113),p=c(73);var x=function e(t){var c=t.submit;return e.defaultProps={submit:function(){}},Object(b.jsx)("form",{onChange:Object(p.debounce)((function(e){return function(e){var t=e.target.value;t&&c(t)}(e)}),1e3),onSubmit:function(e){return e.preventDefault()},children:Object(b.jsx)(g.a,{placeholder:"Type to search"})})};c(103),c(104);var S=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(1),i=Object(r.a)(s,2),h=i[0],O=i[1],f=Object(n.useState)(1),g=Object(r.a)(f,2),p=g[0],S=g[1],y=Object(n.useState)([]),_=Object(r.a)(y,2),N=_[0],k=_[1],C=Object(n.useState)(null),w=Object(r.a)(C,2),E=w[0],M=w[1],B=Object(n.useState)(!1),R=Object(r.a)(B,2),I=R[0],T=R[1],P=Object(n.useState)(!1),D=Object(r.a)(P,2),J=D[0],K=D[1],L=Object(n.useState)([]),U=Object(r.a)(L,2),z=U[0],q=U[1],A=Object(n.useState)(localStorage.getItem("guestKey")),G=Object(r.a)(A,2),H=G[0],V=G[1],F=Object(n.useState)("Search"),Q=Object(r.a)(F,2),W=Q[0],X=Q[1],Y=Object(n.useState)([]),Z=Object(r.a)(Y,2),$=Z[0],ee=Z[1],te="https://api.themoviedb.org/3/",ce="382c03696044ec7006f5212f1c181827";Object(n.useEffect)((function(){H||fetch("".concat(te,"authentication/guest_session/new?api_key=").concat(ce)).then((function(e){return e.json()})).then((function(e){localStorage.setItem("guestKey",e.guest_session_id),V(localStorage.getItem("guestKey"))}))}),[H]),Object(n.useEffect)((function(){fetch("".concat(te,"genre/movie/list?api_key=").concat(ce,"&language=en-US")).then((function(e){return e.json()})).then((function(e){return q(e.genres)}))}),[]),Object(n.useEffect)((function(){if(c)try{fetch("".concat(te,"search/movie?api_key=").concat(ce,"&language=en-US&query=").concat(c,"&page=").concat(h,"&include_adult=false")).then((function(e){return e.json()})).then((function(e){k(Object(o.a)(e.results)),M(e.total_results),T(!1)}))}catch(e){K(!0)}}),[c,p,h]);var ne=p%2===0?Object(o.a)(N.slice(10)):Object(o.a)(N.slice(0,10)),ae=Object(b.jsx)(u.a,{className:"alert",message:"Error Text",description:"Something goes wrong! But truth is out there...",type:"error"}),se="Search"===W?ne:$,ie=se.length?Object(b.jsx)(j.a,{current:p,total:E,onChange:function(e){var t=Math.ceil(e/2);Math.ceil(p/2)!==t?(O(t),S(e)):S(e)},showSizeChanger:!1}):null,oe=I?Object(b.jsx)("div",{className:"spin",children:Object(b.jsx)(l.a,{size:"large"})}):Object(b.jsxs)("div",{children:[Object(b.jsx)(v.Provider,{value:z,children:Object(b.jsx)(m,{movieList:se,rateMovie:function(e,t){fetch("".concat(te,"movie/").concat(t,"/rating?api_key=").concat(ce,"&guest_session_id=").concat(H),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({value:e})})},active:W})}),Object(b.jsx)("div",{className:"paginator",children:ie})]}),re="Search"===W?Object(b.jsxs)("div",{children:[Object(b.jsx)(x,{submit:function(e){a(e),K(!1),T(!0),O(1),S(1)}}),oe]}):oe;return Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)(d,{tabClick:function(e){X(e.target.name),"Rated"===e.target.name&&(T(!0),fetch("".concat(te,"guest_session/").concat(H,"/rated/movies?api_key=").concat(ce,"&language=en-US&sort_by=created_at.asc}")).then((function(e){return e.json()})).then((function(e){ee(e.results),T(!1)})))},active:W}),J?ae:re]})};c(105);i.a.render(Object(b.jsx)(S,{}),document.getElementById("root"))},86:function(e,t,c){},88:function(e,t,c){}},[[106,1,2]]]);
//# sourceMappingURL=main.198481e6.chunk.js.map